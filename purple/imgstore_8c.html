<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: imgstore.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">imgstore.c File Reference<div class="ingroups"><a class="el" href="group__core.html">libpurple</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="internal_8h_source.html">internal.h</a>&quot;</code><br />
<code>#include &quot;dbus-maybe.h&quot;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="imgstore_8h_source.html">imgstore.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__PurpleStoredImage.html">_PurpleStoredImage</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4d5cb5f04e3355bae7306bbca7776421"><td class="memItemLeft" align="right" valign="top"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a4d5cb5f04e3355bae7306bbca7776421">purple_imgstore_add</a> (gpointer data, size_t size, const char *filename)</td></tr>
<tr class="separator:a4d5cb5f04e3355bae7306bbca7776421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f871a2c813086a5106cc27c4844deba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a5f871a2c813086a5106cc27c4844deba">purple_imgstore_new_from_file</a> (const char *path)</td></tr>
<tr class="separator:a5f871a2c813086a5106cc27c4844deba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e992b86c90965143d380c9454132749"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a6e992b86c90965143d380c9454132749">purple_imgstore_add_with_id</a> (gpointer data, size_t size, const char *filename)</td></tr>
<tr class="separator:a6e992b86c90965143d380c9454132749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ffc1942cf38f01105b39a803ceb93bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a0ffc1942cf38f01105b39a803ceb93bc">purple_imgstore_find_by_id</a> (int id)</td></tr>
<tr class="separator:a0ffc1942cf38f01105b39a803ceb93bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05cbe0f94db8e8d45e57054ac80d8d44"><td class="memItemLeft" align="right" valign="top">gconstpointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a05cbe0f94db8e8d45e57054ac80d8d44">purple_imgstore_get_data</a> (<a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *img)</td></tr>
<tr class="separator:a05cbe0f94db8e8d45e57054ac80d8d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132d917d32da2a93f03214fe779894b4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a132d917d32da2a93f03214fe779894b4">purple_imgstore_get_size</a> (<a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *img)</td></tr>
<tr class="separator:a132d917d32da2a93f03214fe779894b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55219d753ac24b79cd0ca8270d7db110"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a55219d753ac24b79cd0ca8270d7db110">purple_imgstore_get_filename</a> (const <a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *img)</td></tr>
<tr class="separator:a55219d753ac24b79cd0ca8270d7db110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab688837239e14c3807baa2f086885bc6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#ab688837239e14c3807baa2f086885bc6">purple_imgstore_get_extension</a> (<a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *img)</td></tr>
<tr class="separator:ab688837239e14c3807baa2f086885bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ab8dc8a12fb896ea6775af9eb434cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a55ab8dc8a12fb896ea6775af9eb434cc">purple_imgstore_ref_by_id</a> (int id)</td></tr>
<tr class="separator:a55ab8dc8a12fb896ea6775af9eb434cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8924cdc29ff85b40f9fd68c581224bad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a8924cdc29ff85b40f9fd68c581224bad">purple_imgstore_unref_by_id</a> (int id)</td></tr>
<tr class="separator:a8924cdc29ff85b40f9fd68c581224bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc324728653125d05e932b8dee365bf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#afc324728653125d05e932b8dee365bf3">purple_imgstore_ref</a> (<a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *img)</td></tr>
<tr class="separator:afc324728653125d05e932b8dee365bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27adc6652a56e9a5ce1c33ffb322ebf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#af27adc6652a56e9a5ce1c33ffb322ebf">purple_imgstore_unref</a> (<a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *img)</td></tr>
<tr class="separator:af27adc6652a56e9a5ce1c33ffb322ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054e247f9ea3d391dc5a749b5db98067"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a054e247f9ea3d391dc5a749b5db98067">purple_imgstore_get_handle</a> ()</td></tr>
<tr class="separator:a054e247f9ea3d391dc5a749b5db98067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21cda3f017fbffe103147d859975183b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#a21cda3f017fbffe103147d859975183b">purple_imgstore_init</a> ()</td></tr>
<tr class="separator:a21cda3f017fbffe103147d859975183b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0099c47d01f8650d19916c5e2244f5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgstore_8c.html#ac0099c47d01f8650d19916c5e2244f5d">purple_imgstore_uninit</a> ()</td></tr>
<tr class="separator:ac0099c47d01f8650d19916c5e2244f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >IM Image Store API </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4d5cb5f04e3355bae7306bbca7776421" name="a4d5cb5f04e3355bae7306bbca7776421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d5cb5f04e3355bae7306bbca7776421">&#9670;&nbsp;</a></span>purple_imgstore_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> * purple_imgstore_add </td>
          <td>(</td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a new PurpleStoredImage.</p>
<p >Despite the name of this function, the image is NOT added to the image store and no ID is assigned. If you need to reference the image by an ID, use <a class="el" href="imgstore_8h.html#a6e992b86c90965143d380c9454132749">purple_imgstore_add_with_id()</a> instead.</p>
<p >The caller owns a reference to this image and must dereference it with <a class="el" href="imgstore_8h.html#af27adc6652a56e9a5ce1c33ffb322ebf">purple_imgstore_unref()</a> for it to be freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to the image data, which the imgstore will take ownership of and free as appropriate. If you want a copy of the data, make it before calling this function. </td></tr>
    <tr><td class="paramname">size</td><td>Image data's size. </td></tr>
    <tr><td class="paramname">filename</td><td>Filename associated with image. This is for your convenience. It could be the full path to the image or, more commonly, the filename of the image without any directory information. It can also be NULL, if you don't need to keep track of a filename.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The stored image, or NULL if the image was not added (because of empty data or size). </dd></dl>

</div>
</div>
<a id="a6e992b86c90965143d380c9454132749" name="a6e992b86c90965143d380c9454132749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e992b86c90965143d380c9454132749">&#9670;&nbsp;</a></span>purple_imgstore_add_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int purple_imgstore_add_with_id </td>
          <td>(</td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a PurpleStoredImage using <a class="el" href="imgstore_8h.html#a4d5cb5f04e3355bae7306bbca7776421">purple_imgstore_add()</a> and add the image to the image store. A unique ID will be assigned to the image.</p>
<p >The caller owns a reference to the image and must dereference it with <a class="el" href="imgstore_8h.html#af27adc6652a56e9a5ce1c33ffb322ebf">purple_imgstore_unref()</a> or <a class="el" href="imgstore_8h.html#a8924cdc29ff85b40f9fd68c581224bad">purple_imgstore_unref_by_id()</a> for it to be freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to the image data, which the imgstore will take ownership of and free as appropriate. If you want a copy of the data, make it before calling this function. </td></tr>
    <tr><td class="paramname">size</td><td>Image data's size. </td></tr>
    <tr><td class="paramname">filename</td><td>Filename associated with image. This is for your convenience. It could be the full path to the image or, more commonly, the filename of the image without any directory information. It can also be NULL, if you don't need to keep track of a filename.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ID for the image. This is a unique number that can be used within libpurple to reference the image. 0 is returned if the image was not added (because of empty data or size). </dd></dl>

</div>
</div>
<a id="a0ffc1942cf38f01105b39a803ceb93bc" name="a0ffc1942cf38f01105b39a803ceb93bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ffc1942cf38f01105b39a803ceb93bc">&#9670;&nbsp;</a></span>purple_imgstore_find_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> * purple_imgstore_find_by_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieve an image from the store. The caller does not own a reference to the image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The ID for the image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the requested image, or NULL if it was not found. </dd></dl>

</div>
</div>
<a id="a05cbe0f94db8e8d45e57054ac80d8d44" name="a05cbe0f94db8e8d45e57054ac80d8d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05cbe0f94db8e8d45e57054ac80d8d44">&#9670;&nbsp;</a></span>purple_imgstore_get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gconstpointer purple_imgstore_get_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves a pointer to the image's data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The Image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the data, which must not be freed or modified. </dd></dl>

</div>
</div>
<a id="ab688837239e14c3807baa2f086885bc6" name="ab688837239e14c3807baa2f086885bc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab688837239e14c3807baa2f086885bc6">&#9670;&nbsp;</a></span>purple_imgstore_get_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * purple_imgstore_get_extension </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Looks at the magic numbers of the image data (the first few bytes) and returns an extension corresponding to the image's file type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The image's extension (for example "png") or "icon" if unknown. </dd></dl>

</div>
</div>
<a id="a55219d753ac24b79cd0ca8270d7db110" name="a55219d753ac24b79cd0ca8270d7db110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55219d753ac24b79cd0ca8270d7db110">&#9670;&nbsp;</a></span>purple_imgstore_get_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * purple_imgstore_get_filename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves a pointer to the image's filename.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the filename, which must not be freed or modified. </dd></dl>

</div>
</div>
<a id="a054e247f9ea3d391dc5a749b5db98067" name="a054e247f9ea3d391dc5a749b5db98067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054e247f9ea3d391dc5a749b5db98067">&#9670;&nbsp;</a></span>purple_imgstore_get_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * purple_imgstore_get_handle </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns the image store subsystem handle.</p>
<dl class="section return"><dt>Returns</dt><dd>The subsystem handle. </dd></dl>

</div>
</div>
<a id="a132d917d32da2a93f03214fe779894b4" name="a132d917d32da2a93f03214fe779894b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132d917d32da2a93f03214fe779894b4">&#9670;&nbsp;</a></span>purple_imgstore_get_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t purple_imgstore_get_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves the length of the image's data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The Image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size of the data that the pointer returned by purple_imgstore_get_data points to. </dd></dl>

</div>
</div>
<a id="a21cda3f017fbffe103147d859975183b" name="a21cda3f017fbffe103147d859975183b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21cda3f017fbffe103147d859975183b">&#9670;&nbsp;</a></span>purple_imgstore_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_imgstore_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initializes the image store subsystem. </p>

</div>
</div>
<a id="a5f871a2c813086a5106cc27c4844deba" name="a5f871a2c813086a5106cc27c4844deba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f871a2c813086a5106cc27c4844deba">&#9670;&nbsp;</a></span>purple_imgstore_new_from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> * purple_imgstore_new_from_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a PurpleStoredImage using <a class="el" href="imgstore_8h.html#a4d5cb5f04e3355bae7306bbca7776421">purple_imgstore_add()</a> by reading the given filename from disk.</p>
<p >The image is not added to the image store and no ID is assigned. If you need to reference the image by an ID, use <a class="el" href="imgstore_8h.html#a6e992b86c90965143d380c9454132749">purple_imgstore_add_with_id()</a> instead.</p>
<p >The caller owns a reference to this image and must dereference it with <a class="el" href="imgstore_8h.html#af27adc6652a56e9a5ce1c33ffb322ebf">purple_imgstore_unref()</a> for it to be freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The stored image, or NULL if the image was not added (because of empty data or size).</dd></dl>
<dl class="section since"><dt>Since</dt><dd>2.5.0 </dd></dl>

</div>
</div>
<a id="afc324728653125d05e932b8dee365bf3" name="afc324728653125d05e932b8dee365bf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc324728653125d05e932b8dee365bf3">&#9670;&nbsp;</a></span>purple_imgstore_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> * purple_imgstore_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Increment the reference count.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>img</em> </dd></dl>

</div>
</div>
<a id="a55ab8dc8a12fb896ea6775af9eb434cc" name="a55ab8dc8a12fb896ea6775af9eb434cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55ab8dc8a12fb896ea6775af9eb434cc">&#9670;&nbsp;</a></span>purple_imgstore_ref_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_imgstore_ref_by_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Increment the reference count using an ID.</p>
<p >This is a convience wrapper for <a class="el" href="imgstore_8h.html#a0ffc1942cf38f01105b39a803ceb93bc">purple_imgstore_find_by_id()</a> and <a class="el" href="imgstore_8h.html#afc324728653125d05e932b8dee365bf3">purple_imgstore_ref()</a>, so if you have a PurpleStoredImage, it'll be more efficient to call <a class="el" href="imgstore_8h.html#afc324728653125d05e932b8dee365bf3">purple_imgstore_ref()</a> directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The ID for the image. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac0099c47d01f8650d19916c5e2244f5d" name="ac0099c47d01f8650d19916c5e2244f5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0099c47d01f8650d19916c5e2244f5d">&#9670;&nbsp;</a></span>purple_imgstore_uninit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_imgstore_uninit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Uninitializes the image store subsystem. </p>

</div>
</div>
<a id="af27adc6652a56e9a5ce1c33ffb322ebf" name="af27adc6652a56e9a5ce1c33ffb322ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af27adc6652a56e9a5ce1c33ffb322ebf">&#9670;&nbsp;</a></span>purple_imgstore_unref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> * purple_imgstore_unref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="imgstore_8h.html#aa767d45f7df5f9d64bcf4466bdd229a0">PurpleStoredImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Decrement the reference count.</p>
<p >If the reference count reaches zero, the image will be freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>img</em> or <code>NULL</code> if the reference count reached zero. </dd></dl>

</div>
</div>
<a id="a8924cdc29ff85b40f9fd68c581224bad" name="a8924cdc29ff85b40f9fd68c581224bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8924cdc29ff85b40f9fd68c581224bad">&#9670;&nbsp;</a></span>purple_imgstore_unref_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_imgstore_unref_by_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Decrement the reference count using an ID.</p>
<p >This is a convience wrapper for <a class="el" href="imgstore_8h.html#a0ffc1942cf38f01105b39a803ceb93bc">purple_imgstore_find_by_id()</a> and <a class="el" href="imgstore_8h.html#af27adc6652a56e9a5ce1c33ffb322ebf">purple_imgstore_unref()</a>, so if you have a PurpleStoredImage, it'll be more efficient to call <a class="el" href="imgstore_8h.html#af27adc6652a56e9a5ce1c33ffb322ebf">purple_imgstore_unref()</a> directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The ID for the image. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
